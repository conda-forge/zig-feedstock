--- CMakeLists.txt      2024-06-06 14:05:11.000000000 -0500
+++ CMakeLists.txt      2024-06-19 18:01:59.808672313 -0500
@@ -852,3 +870,9 @@
 else()
-  target_link_libraries(zig1 LINK_PUBLIC m)
+  if(WIN32)
+    find_library(M NAMES m libm.lib NAMES_PER_DIR)
+    target_link_libraries(zig1 LINK_PUBLIC $M)
+    # target_link_libraries(zig1 LINK_PUBLIC $ENV{PREFIX}/Library/lib/libm.lib)
+  else()
+    target_link_libraries(zig1 LINK_PUBLIC m)
+  endif()
   if(MINGW)
@@ -731,2 +737,3 @@
 else()
+target_compile_options(zigcpp PRIVATE -MD)
 target_compile_options(zigcpp PRIVATE /Zc:preprocessor)
@@ -852,3 +870,3 @@
 else()
-  target_link_libraries(zig1 LINK_PUBLIC m)
+  target_link_libraries(zig1 LINK_PUBLIC $ENV{PREFIX}/Library/lib/libm.lib)
   if(MINGW)
