# Windows: Replace deprecated POSIX functions with MSVC equivalents
#
# MSVC marks strdup() and close() as deprecated, preferring _strdup()
# and _close() respectively. This patch updates:
# - src/zig_llvm-ar.cpp: close -> _close
#
# Eliminates deprecation warnings during Windows builds.

--- a/src/zig_llvm-ar.cpp
+++ b/src/zig_llvm-ar.cpp
@@ -619,8 +619,8 @@
         sys::fs::setLastAccessAndModificationTime(FD, ModTimeOrErr.get()));
   }

-  if (close(FD))
-    fail("Could not close the file");
+  if (_close(FD))
+    fail("Could not _close the file");
 }

 static bool shouldCreateArchive(ArchiveOperation Op) {
